<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daily Code Journal</title>
   <link rel="icon" type="image/png" href="logo.png">
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect } = React;
    const Calendar = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>;
    const BookOpen = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>;
    const TrendingUp = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>;
    const Zap = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>;
    const LogOut = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>;
    const User = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>;

    function DailyCodeJournal() {
      const [userEmail, setUserEmail] = useState('');
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [userProfile, setUserProfile] = useState({ name: '', nickname: '' });
      const [showProfileSetup, setShowProfileSetup] = useState(false);
      
      const [entries, setEntries] = useState({});
      const [currentEntry, setCurrentEntry] = useState({
        worked: '',
        learned: '',
        challenges: '',
        goals: '',
        mood: 'üòä'
      });
      const [selectedDate, setSelectedDate] = useState('');

      const moods = ['üòä', 'ü§î', 'üò§', 'üî•', 'üò¥', 'üéâ', 'üòÖ', 'üí™'];

      useEffect(() => {
        checkAuth();
      }, []);

      useEffect(() => {
        if (isLoggedIn) {
          setSelectedDate(getTodayDate());
          loadUserData();
        }
      }, [isLoggedIn]);

      useEffect(() => {
        if (selectedDate && entries[selectedDate]) {
          setCurrentEntry(entries[selectedDate]);
        } else if (selectedDate) {
          setCurrentEntry({
            worked: '',
            learned: '',
            challenges: '',
            goals: '',
            mood: 'üòä'
          });
        }
      }, [selectedDate, entries]);

      const getTodayDate = () => {
        return new Date().toISOString().split('T')[0];
      };

      const checkAuth = () => {
        const stored = localStorage.getItem('current-user-email');
        if (stored) {
          setUserEmail(stored);
          setIsLoggedIn(true);
        }
      };

      const handleLogin = (email) => {
        if (!email || !email.includes('@')) {
          alert('Please enter a valid email address');
          return;
        }

        localStorage.setItem('current-user-email', email);
        setUserEmail(email);
        setIsLoggedIn(true);
        
        const profileData = localStorage.getItem(`profile-${email}`);
        if (!profileData) {
          setShowProfileSetup(true);
        } else {
          setUserProfile(JSON.parse(profileData));
        }
      };

      const saveProfile = () => {
        if (!userProfile.name || !userProfile.nickname) {
          alert('Please fill in both name and nickname');
          return;
        }

        localStorage.setItem(`profile-${userEmail}`, JSON.stringify(userProfile));
        setShowProfileSetup(false);
        alert('‚úÖ Profile saved!');
      };

      const handleLogout = () => {
        localStorage.removeItem('current-user-email');
        setIsLoggedIn(false);
        setUserEmail('');
        setUserProfile({ name: '', nickname: '' });
        setEntries({});
      };

      const loadUserData = () => {
        const profileData = localStorage.getItem(`profile-${userEmail}`);
        if (profileData) {
          setUserProfile(JSON.parse(profileData));
        }

        const entriesData = localStorage.getItem(`journal-entries-${userEmail}`);
        if (entriesData) {
          setEntries(JSON.parse(entriesData));
        }
      };

      const saveEntry = () => {
        if (!selectedDate) return;

        const updated = {
          ...entries,
          [selectedDate]: currentEntry
        };

        localStorage.setItem(`journal-entries-${userEmail}`, JSON.stringify(updated));
        setEntries(updated);
        alert('‚úÖ Entry saved! Now export and push to GitHub.');
      };

      const exportToMarkdown = () => {
        if (!selectedDate || !entries[selectedDate]) {
          alert('No entry for this date');
          return;
        }

        const entry = entries[selectedDate];
        const date = new Date(selectedDate);
        const formatted = date.toLocaleDateString('en-US', { 
          year: 'numeric', 
          month: 'long', 
          day: 'numeric' 
        });

        const markdown = `# ${formatted}

**Author:** ${userProfile.name} (@${userProfile.nickname})

## What I worked on
${entry.worked || 'Nothing recorded'}

## What I learned
${entry.learned || 'Nothing recorded'}

## Challenges
${entry.challenges || 'None'}

## Tomorrow's goals
${entry.goals || 'Not set'}

## Mood: ${entry.mood}
`;

        const blob = new Blob([markdown], { type: 'text/markdown' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `${selectedDate}.md`;
        a.click();
        URL.revokeObjectURL(url);
      };

      const getStreak = () => {
        const dates = Object.keys(entries).sort().reverse();
        let streak = 0;
        let currentDate = new Date();

        for (let i = 0; i < dates.length; i++) {
          const entryDate = new Date(dates[i]);
          const diffDays = Math.floor((currentDate - entryDate) / (1000 * 60 * 60 * 24));

          if (diffDays === i) {
            streak++;
          } else {
            break;
          }
        }

        return streak;
      };

      if (!isLoggedIn) {
        return (
          <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4">
            <div className="bg-white/10 backdrop-blur-sm rounded-xl p-8 border border-white/20 shadow-2xl max-w-md w-full">
              <div className="text-center mb-8">
                <div className="w-16 h-16 mx-auto mb-4 text-purple-300"><BookOpen /></div>
                <h1 className="text-3xl font-bold text-white mb-2">Daily Code Journal</h1>
                <p className="text-purple-200">Enter your email to continue</p>
              </div>

              <form onSubmit={(e) => {
                e.preventDefault();
                const email = e.target.email.value;
                handleLogin(email);
              }}>
                <input
                  type="email"
                  name="email"
                  placeholder="your.email@example.com"
                  className="w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-400 mb-4"
                  required
                />
                <button
                  type="submit"
                  className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 rounded-lg font-semibold hover:from-purple-600 hover:to-pink-600 transition-all"
                >
                  Continue
                </button>
              </form>

              <p className="text-white/60 text-sm text-center mt-4">
                No password needed. Your data is stored locally in your browser.
              </p>
            </div>
          </div>
        );
      }

      if (showProfileSetup) {
        return (
          <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4">
            <div className="bg-white/10 backdrop-blur-sm rounded-xl p-8 border border-white/20 shadow-2xl max-w-md w-full">
              <div className="text-center mb-8">
                <div className="w-16 h-16 mx-auto mb-4 text-purple-300"><User /></div>
                <h1 className="text-3xl font-bold text-white mb-2">Setup Your Profile</h1>
                <p className="text-purple-200">Tell us a bit about yourself</p>
              </div>

              <div className="space-y-4">
                <div>
                  <label className="text-white font-medium mb-2 block">Full Name</label>
                  <input
                    type="text"
                    value={userProfile.name}
                    onChange={(e) => setUserProfile({...userProfile, name: e.target.value})}
                    placeholder="John Doe"
                    className="w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-400"
                  />
                </div>

                <div>
                  <label className="text-white font-medium mb-2 block">Nickname / GitHub Username</label>
                  <input
                    type="text"
                    value={userProfile.nickname}
                    onChange={(e) => setUserProfile({...userProfile, nickname: e.target.value})}
                    placeholder="johndoe"
                    className="w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-400"
                  />
                </div>

                <button
                  onClick={saveProfile}
                  className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 rounded-lg font-semibold hover:from-purple-600 hover:to-pink-600 transition-all"
                >
                  Save Profile
                </button>
              </div>
            </div>
          </div>
        );
      }

      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4">
          <div className="max-w-4xl mx-auto">
            <div className="text-center mb-8 pt-8">
              <div className="flex items-center justify-between mb-4">
                <div></div>
                <div className="flex items-center gap-3">
                  <div className="text-right">
                    <p className="text-white font-semibold">{userProfile.name}</p>
                    <p className="text-purple-200 text-sm">@{userProfile.nickname}</p>
                  </div>
                  <button
                    onClick={handleLogout}
                    className="p-2 bg-white/10 rounded-lg hover:bg-white/20 transition-all"
                    title="Logout"
                  >
                    <LogOut />
                  </button>
                </div>
              </div>

              <h1 className="text-5xl font-bold text-white mb-2 flex items-center justify-center gap-3">
                <div className="w-12 h-12"><BookOpen /></div>
                Daily Code Journal
              </h1>
              <p className="text-purple-200">Document your coding journey, one day at a time</p>
            </div>

            <div className="grid grid-cols-2 gap-4 mb-6">
              <div className="bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20">
                <div className="flex items-center gap-2 text-purple-200 mb-1">
                  <div className="w-5 h-5"><Zap /></div>
                  <span className="text-sm">Current Streak</span>
                </div>
                <div className="text-3xl font-bold text-white">{getStreak()} days</div>
              </div>
              <div className="bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20">
                <div className="flex items-center gap-2 text-purple-200 mb-1">
                  <div className="w-5 h-5"><TrendingUp /></div>
                  <span className="text-sm">Total Entries</span>
                </div>
                <div className="text-3xl font-bold text-white">{Object.keys(entries).length}</div>
              </div>
            </div>

            <div className="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-2xl">
              <div className="mb-6">
                <label className="flex items-center gap-2 text-white mb-2 font-medium">
                  <div className="w-5 h-5"><Calendar /></div>
                  Select Date
                </label>
                <input
                  type="date"
                  value={selectedDate}
                  onChange={(e) => setSelectedDate(e.target.value)}
                  max={getTodayDate()}
                  className="w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-400"
                />
              </div>

              <div className="space-y-4">
                <div>
                  <label className="text-white font-medium mb-2 block">What I worked on</label>
                  <textarea
                    value={currentEntry.worked}
                    onChange={(e) => setCurrentEntry({...currentEntry, worked: e.target.value})}
                    placeholder="Describe what you built or worked on today..."
                    className="w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-400 min-h-24"
                  />
                </div>

                <div>
                  <label className="text-white font-medium mb-2 block">What I learned</label>
                  <textarea
                    value={currentEntry.learned}
                    onChange={(e) => setCurrentEntry({...currentEntry, learned: e.target.value})}
                    placeholder="New concepts, techniques, or insights..."
                    className="w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-400 min-h-24"
                  />
                </div>

                <div>
                  <label className="text-white font-medium mb-2 block">Challenges</label>
                  <textarea
                    value={currentEntry.challenges}
                    onChange={(e) => setCurrentEntry({...currentEntry, challenges: e.target.value})}
                    placeholder="Bugs, obstacles, or tough problems..."
                    className="w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-400 min-h-20"
                  />
                </div>

                <div>
                  <label className="text-white font-medium mb-2 block">Tomorrow's goals</label>
                  <textarea
                    value={currentEntry.goals}
                    onChange={(e) => setCurrentEntry({...currentEntry, goals: e.target.value})}
                    placeholder="What you want to accomplish next..."
                    className="w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-400 min-h-20"
                  />
                </div>

                <div>
                  <label className="text-white font-medium mb-2 block">Today's mood</label>
                  <div className="flex gap-2 flex-wrap">
                    {moods.map(mood => (
                      <button
                        key={mood}
                        onClick={() => setCurrentEntry({...currentEntry, mood})}
                        className={`text-3xl p-3 rounded-lg transition-all ${
                          currentEntry.mood === mood 
                            ? 'bg-purple-500 scale-110' 
                            : 'bg-white/20 hover:bg-white/30'
                        }`}
                      >
                        {mood}
                      </button>
                    ))}
                  </div>
                </div>
              </div>

              <div className="flex gap-3 mt-6">
                <button
                  onClick={saveEntry}
                  className="flex-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 rounded-lg font-semibold hover:from-purple-600 hover:to-pink-600 transition-all"
                >
                  üíæ Save Entry
                </button>
                <button
                  onClick={exportToMarkdown}
                  className="px-6 bg-white/20 text-white py-3 rounded-lg font-semibold hover:bg-white/30 transition-all border border-white/30"
                >
                  ‚¨áÔ∏è Export .md
                </button>
              </div>

              <div className="mt-6 p-4 bg-blue-500/20 border border-blue-400/30 rounded-lg">
                <p className="text-blue-100 text-sm">
                  <strong>üìù Daily workflow:</strong> Write your entry ‚Üí Save ‚Üí Export as .md ‚Üí 
                  Add to your repo ‚Üí Commit ‚Üí Push to GitHub!
                </p>
              </div>
            </div>

            {Object.keys(entries).length > 0 && (
              <div className="mt-6 bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20">
                <h2 className="text-2xl font-bold text-white mb-4">Recent Entries</h2>
                <div className="space-y-2">
                  {Object.keys(entries).sort().reverse().slice(0, 7).map(date => (
                    <button
                      key={date}
                      onClick={() => setSelectedDate(date)}
                      className="w-full text-left px-4 py-3 bg-white/10 hover:bg-white/20 rounded-lg border border-white/20 transition-all"
                    >
                      <div className="flex items-center justify-between">
                        <span className="text-white font-medium">{date}</span>
                        <span className="text-2xl">{entries[date].mood}</span>
                      </div>
                    </button>
                  ))}
                </div>
              </div>
            )}
          </div>
        </div>
      );
    }
  </script>
  
  <script type="text/babel">
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<DailyCodeJournal />);
  </script>
</body>
</html>